{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v6.json", "dbt_version": "1.10.2", "generated_at": "2025-10-25T23:10:08.516506Z", "invocation_id": "6d3cfd11-a288-48dc-95b9-3ed2b5033e92", "invocation_started_at": "2025-10-25T23:10:06.915406Z", "env": {}}, "results": [{"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-25T23:10:07.823449Z", "completed_at": "2025-10-25T23:10:07.838853Z"}, {"name": "execute", "started_at": "2025-10-25T23:10:07.840279Z", "completed_at": "2025-10-25T23:10:08.069492Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.24998092651367188, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.enterate.stg_electricity", "compiled": true, "compiled_code": "-- i-DE (electricidad) => columnas esperadas por el modelo com\u00fan\nselect\n  md5(concat_ws('||',\n      'ide','electricity', coalesce(municipio,''), coalesce(via,''), coalesce(numero,''),\n      (to_timestamp(fecha||' '||hora_inicio,'DD/MM/YYYY HH24:MI') at time zone 'Europe/Madrid')::text,\n      (to_timestamp(fecha||' '||hora_fin   ,'DD/MM/YYYY HH24:MI') at time zone 'Europe/Madrid')::text\n  ))                                           as fingerprint,\n  'ide'                                        as source,\n  'electricity'                                as category,\n  'planned'                                    as status,\n  municipio                                    as city,\n  via                                          as street,\n  nullif(numero,'')                            as street_number,\n  lat::double precision                        as lat,\n  lon::double precision                        as lon,\n  (to_timestamp(fecha||' '||hora_inicio,'DD/MM/YYYY HH24:MI') at time zone 'Europe/Madrid') as start_ts_utc,\n  (to_timestamp(fecha||' '||hora_fin   ,'DD/MM/YYYY HH24:MI') at time zone 'Europe/Madrid') as end_ts_utc,\n  null::text                                   as description,\n  null::text                                   as event_id,\n  now() at time zone 'utc'                     as ingested_at_utc\nfrom \"appdb\".\"staging\".\"electricity\"", "relation_name": "\"appdb\".\"analytics_staging\".\"stg_electricity\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-25T23:10:08.083599Z", "completed_at": "2025-10-25T23:10:08.098984Z"}, {"name": "execute", "started_at": "2025-10-25T23:10:08.100252Z", "completed_at": "2025-10-25T23:10:08.148031Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.06862688064575195, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.enterate.stg_gas", "compiled": true, "compiled_code": "-- Gas simulado -> normaliza a modelo com\u00fan\nselect\n  md5(concat_ws('||',\n      'gas','gas',\n      coalesce(direccion,''),\n      coalesce(nullif(start_ts,''),''),\n      coalesce(nullif(end_ts,''),'')\n  ))                                             as fingerprint,\n  'gas'                                          as source,\n  'gas'                                          as category,\n  case\n    when coalesce(nullif(lower(programado::text),''),'false')\n         in ('true','t','1','yes','y','si','s\u00ed') then 'planned'\n    else 'unplanned'\n  end                                            as status,\n  'Madrid'                                       as city,\n  direccion                                      as street,\n  null::text                                     as street_number,\n  lat::double precision                          as lat,\n  lon::double precision                          as lon,\n  nullif(start_ts,'')::timestamptz               as start_ts_utc,\n  nullif(end_ts,'')::timestamptz                 as end_ts_utc,\n  mensaje                                        as description,\n  event_id::text                                 as event_id,\n  now() at time zone 'utc'                       as ingested_at_utc\nfrom \"appdb\".\"staging\".\"gas\"", "relation_name": "\"appdb\".\"analytics_staging\".\"stg_gas\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-25T23:10:08.157777Z", "completed_at": "2025-10-25T23:10:08.167253Z"}, {"name": "execute", "started_at": "2025-10-25T23:10:08.168282Z", "completed_at": "2025-10-25T23:10:08.218191Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.0638432502746582, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.enterate.stg_road", "compiled": true, "compiled_code": "-- Ayuntamiento (tr\u00e1fico/obras)\nselect\n  md5(concat_ws('||',\n      'ayto',\n      case when coalesce(es_obras,false) then 'road_works'\n           when coalesce(es_accidente,false) then 'accident'\n           else 'road' end,\n      coalesce(municipio,''), coalesce(coalesce(via,descripcion,''),''), coalesce(numero,''),\n      coalesce(nullif(start_ts,''),'') , coalesce(nullif(end_ts,''),'')\n  ))                                           as fingerprint,\n  'ayto'                                       as source,\n  case when coalesce(es_obras,false) then 'road_works'\n       when coalesce(es_accidente,false) then 'accident'\n       else 'road' end                         as category,\n  case when nullif(estado,'') = '1' then 'active' else 'planned' end      as status,\n  municipio                                    as city,\n  coalesce(via, descripcion)                   as street,\n  nullif(numero,'')                            as street_number,\n  lat::double precision                        as lat,\n  lon::double precision                        as lon,\n  nullif(start_ts,'')::timestamptz             as start_ts_utc,\n  nullif(end_ts,'')::timestamptz               as end_ts_utc,\n  descripcion                                  as description,\n  coalesce(id_incidencia::text, event_id::text) as event_id,\n  now() at time zone 'utc'                     as ingested_at_utc\nfrom \"appdb\".\"staging\".\"road\"", "relation_name": "\"appdb\".\"analytics_staging\".\"stg_road\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-25T23:10:08.227841Z", "completed_at": "2025-10-25T23:10:08.241378Z"}, {"name": "execute", "started_at": "2025-10-25T23:10:08.242850Z", "completed_at": "2025-10-25T23:10:08.299071Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.07471132278442383, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.enterate.stg_water", "compiled": true, "compiled_code": "-- Canal de Isabel II (agua) -> normaliza a modelo com\u00fan\nselect\n  md5(concat_ws('||',\n      'canal','water',\n      coalesce(direccion,''),\n      coalesce(nullif(start_ts,''),''),\n      coalesce(nullif(end_ts,''),'')\n  ))                                             as fingerprint,\n  'canal'                                        as source,\n  'water'                                        as category,\n  case\n    when coalesce(nullif(lower(programado::text),''),'false')\n         in ('true','t','1','yes','y','si','s\u00ed') then 'planned'\n    else 'unplanned'\n  end                                            as status,\n  'Madrid'                                       as city,\n  direccion                                      as street,\n  null::text                                     as street_number,\n  lat::double precision                          as lat,\n  lon::double precision                          as lon,\n  nullif(start_ts,'')::timestamptz               as start_ts_utc,\n  nullif(end_ts,'')::timestamptz                 as end_ts_utc,\n  mensaje                                        as description,\n  event_id::text                                 as event_id,\n  now() at time zone 'utc'                       as ingested_at_utc\nfrom \"appdb\".\"staging\".\"water\"", "relation_name": "\"appdb\".\"analytics_staging\".\"stg_water\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-10-25T23:10:08.309797Z", "completed_at": "2025-10-25T23:10:08.327240Z"}, {"name": "execute", "started_at": "2025-10-25T23:10:08.330543Z", "completed_at": "2025-10-25T23:10:08.479511Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.17308402061462402, "adapter_response": {"_message": "INSERT 0 357", "code": "INSERT", "rows_affected": 357}, "message": "INSERT 0 357", "failures": null, "unique_id": "model.enterate.fct_events", "compiled": true, "compiled_code": "\n\nwith unioned as (\n  select * from \"appdb\".\"analytics_staging\".\"stg_electricity\"\n  union all\n  select * from \"appdb\".\"analytics_staging\".\"stg_water\"\n  union all\n  select * from \"appdb\".\"analytics_staging\".\"stg_road\"\n  union all\n  select * from \"appdb\".\"analytics_staging\".\"stg_gas\"\n)\n\nselect * from unioned\n\n\nwhere ingested_at_utc >\n  (select coalesce(max(ingested_at_utc),'1970-01-01T00:00:00Z') from \"appdb\".\"analytics_analytics\".\"fct_events\")\n", "relation_name": "\"appdb\".\"analytics_analytics\".\"fct_events\"", "batch_results": null}], "elapsed_time": 0.9061450958251953, "args": {"require_all_warnings_handled_by_warn_error": false, "indirect_selection": "eager", "log_file_max_bytes": 10485760, "send_anonymous_usage_stats": true, "static_parser": true, "require_explicit_package_overrides_for_builtin_materializations": true, "resource_types": [], "use_colors": true, "log_level": "info", "partial_parse_file_diff": true, "printer_width": 80, "require_batched_execution_for_custom_microbatch_strategy": false, "strict_mode": false, "validate_macro_args": false, "log_level_file": "debug", "log_path": "/app/etl/warehouse/dbt/logs", "upload_to_artifacts_ingest_api": false, "favor_state": false, "exclude_resource_types": [], "print": true, "macro_debugging": false, "quiet": false, "profiles_dir": "/root/.dbt", "invocation_command": "dbt build --project-dir /app/etl/warehouse/dbt", "vars": {}, "show": false, "cache_selected_only": false, "export_saved_queries": false, "partial_parse": true, "which": "build", "warn_error_options": {"error": [], "warn": [], "silence": []}, "defer": false, "project_dir": "/app/etl/warehouse/dbt", "empty": false, "log_format": "default", "show_resource_report": false, "skip_nodes_if_on_run_start_fails": false, "use_colors_file": true, "write_json": true, "include_saved_query": false, "require_yaml_configuration_for_mf_time_spines": false, "use_fast_test_edges": false, "select": [], "populate_cache": true, "introspect": true, "source_freshness_run_project_hooks": true, "state_modified_compare_vars": false, "version_check": true, "require_resource_names_without_spaces": true, "log_format_file": "debug", "show_all_deprecations": false, "exclude": [], "require_nested_cumulative_type_params": false, "state_modified_compare_more_unrendered_values": false}}